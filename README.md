NetSuite Record Revision Scripts
Overview

These scripts collectively enable the functionality to make revisions of records directly from the record form in NetSuite. This set includes a Client Script to handle the revision action, a User Event Script to add a revision button to the record form, and a Suitelet to manage the creation of the record revision.
Scripts Description
1. Client Script (CLMakeRevisionButton.js)

This script initializes a function to open a URL that points to a Suitelet, designed to handle the record revision. The function makeRevision() is triggered by a button added via a User Event Script.

Key Functions:

    makeRevision: Opens a new window with the Suitelet URL, passing the current record ID.

2. User Event Script (UE_AddMakeRevisionButton.js)

Adds a button titled "Make a Revision" to the record form. This button triggers the makeRevision() function defined in the Client Script.

Key Functionality:

    beforeLoad: Adds a custom button to the record form during the form loading phase.

3. Suitelet (Suitelet.js)

Handles the logic for creating a new revision of the record. It loads the current record, increments its revision number, and saves it as a new record. Additionally, it updates the original record's status to "Requoted".

Process Steps:

    Load record: Retrieves and verifies the existing record.
    Increment revision number: Adjusts the document number to reflect the revision.
    Create new record: Copies the existing record, assigns the new document number, and saves it.
    Mark original as requoted: Updates the original record and saves the changes.
    Redirect: Redirects the user to the newly created record.

Installation and Setup

    Upload Scripts:
        Save each script file and upload them to your NetSuite SuiteScripts directory.

    Create Script Records:
        For each script, navigate to Customization > Scripting > Scripts and click New.
        Select the appropriate script type (ClientScript, UserEventScript, Suitelet) and link to the uploaded files.

    Deploy Scripts:
        Deploy the ClientScript and UserEventScript on the relevant record forms where the revision functionality is needed.
        Ensure the Suitelet is accessible and set up with appropriate permissions.

Configuration Requirements

    Autogenerated Numbers: Ensure that autogenerated numbers are turned on with override allowed. This is crucial for the scripts to properly manage revisions.
    Suffix Format: Autogenerated numbers must include a suffix in the format '.x' where 'x' represents any number, to properly indicate revision sequences.

Usage

Once deployed, a button labeled "Make a Revision" will appear on the specified record forms. Clicking this button will:

    Trigger the Suitelet to create a revision of the current record.
    Redirect to the new record upon successful creation.
    Update the status of the original record.

Troubleshooting

    Button Not Showing: Check if the User Event Script is deployed correctly and linked to the right forms.
    Revision Not Created: Verify that the Suitelet script is correctly handling record creation and redirection. Check for logs in case of errors.
    Incorrect Number Format: Ensure that the configuration for autogenerated numbers is correctly set up as specified.

For further issues, consult NetSuite's scripting documentation or contact your administrator for support.
